import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.c3fd347f.js";const b=JSON.parse('{"title":"vscode插件开发-chatgpt插件","description":"","frontmatter":{},"headers":[],"relativePath":"vscode/develope/chatgpt.md","filePath":"vscode/develope/chatgpt.md","lastUpdated":1707147609000}'),p={name:"vscode/develope/chatgpt.md"},o=l(`<h1 id="vscode插件开发-chatgpt插件" tabindex="-1">vscode插件开发-chatgpt插件 <a class="header-anchor" href="#vscode插件开发-chatgpt插件" aria-label="Permalink to &quot;vscode插件开发-chatgpt插件&quot;">​</a></h1><h1 id="vscode-chatgpt插件" tabindex="-1">VSCode-ChatGPT插件 <a class="header-anchor" href="#vscode-chatgpt插件" aria-label="Permalink to &quot;VSCode-ChatGPT插件&quot;">​</a></h1><p>​<img src="https://yhyblog-2023-2-8.oss-cn-hangzhou.aliyuncs.com/md/2023/05/icon.png" alt="icon" style="width:60%;margin:0px 20%;zoom:50%;"></p><p>最近，由于现在大多ChatGPT插件都需要付费，自己想着刚好有个账号，开发一个简单的方便自己使用(希望能用上🙄)。不过使用还是需要科学上网，而且目前存在一些小Bug😂。在这篇文章中，我将会介绍这个插件的开发流程和代码讲解👇。</p><h2 id="开发流程" tabindex="-1">开发流程 <a class="header-anchor" href="#开发流程" aria-label="Permalink to &quot;开发流程&quot;">​</a></h2><h3 id="确定需求" tabindex="-1">确定需求 <a class="header-anchor" href="#确定需求" aria-label="Permalink to &quot;确定需求&quot;">​</a></h3><p>在开发插件之前，我们需要先确定需求。功能基本参照<a href="https://marketplace.visualstudio.com/items?itemName=WhenSunset.chatgpt-china" target="_blank" rel="noreferrer">ChatGPT中文版</a>。在这个插件中，我们需要实现以下功能：</p><ul><li>用户可以在VSCode中输入文本，然后使用ChatGPT进行自然语言处理。可以对答案进行复制。</li><li>用户可以选择<a href="https://github.com/PlexPt/awesome-chatgpt-prompts-zh/blob/main/prompts-zh.json" target="_blank" rel="noreferrer">github开源项目</a>提供的角色Prompt方便提问。</li><li>可以选择代码进行快捷提问(快捷键目前仍有问题)，主要包括解释代码、优化代码、找代码存在的未知问题。</li></ul><h3 id="选择开发语言和框架" tabindex="-1">选择开发语言和框架 <a class="header-anchor" href="#选择开发语言和框架" aria-label="Permalink to &quot;选择开发语言和框架&quot;">​</a></h3><p>在确定需求之后，我们需要选择开发语言和框架。由于Vscode插件是基于Node.js开发的，因此我们选择使用Node.js作为开发语言，并使用Vscode提供的插件开发框架进行开发，使用ts语言，通过使用axios进行请求。</p><h3 id="编写代码" tabindex="-1">编写代码 <a class="header-anchor" href="#编写代码" aria-label="Permalink to &quot;编写代码&quot;">​</a></h3><p>在选择好开发语言和框架之后，我们开始编写代码。在这个插件中，我们需要实现以下功能：</p><ul><li><p>在Vscode中添加一个命令输入框，让用户输入请求接口Token。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 添加命令</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;contributes&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;commands&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.InputToken&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;InputToken&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">     ]</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// Vscode设置区配置</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">&quot;configuration&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;properties&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;UsefulCode.token&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;string&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;default&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;$comment&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;输入OpenAI的token&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;description&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Enter your OpenAPI token.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 注册输入token命令</span></span>
<span class="line"><span style="color:#E1E4E8;">	context.subscriptions.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">		vscode.commands.</span><span style="color:#B392F0;">registerCommand</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;UsefulCode.InputToken&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">userToken</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> vscode.window.</span><span style="color:#B392F0;">showInputBox</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">				prompt: </span><span style="color:#9ECBFF;">&#39;Enter your OpenAI API token&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">				placeHolder: </span><span style="color:#9ECBFF;">&#39;Token&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">			});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (userToken) {</span></span>
<span class="line"><span style="color:#E1E4E8;">				</span><span style="color:#6A737D;">// 保存用户的Token</span></span>
<span class="line"><span style="color:#E1E4E8;">				</span><span style="color:#B392F0;">saveToken</span><span style="color:#E1E4E8;">(userToken);</span></span>
<span class="line"><span style="color:#E1E4E8;">				vscode.window.</span><span style="color:#B392F0;">showInformationMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;设置Token成功&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">			}</span></span>
<span class="line"><span style="color:#E1E4E8;">		})</span></span>
<span class="line"><span style="color:#E1E4E8;">	);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 保存token到全局设置，方便调用</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">saveToken</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">token</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> vscode.workspace.</span><span style="color:#B392F0;">getConfiguration</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">CONFIG_SECTION</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">	config.</span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;token&#39;</span><span style="color:#E1E4E8;">, token, vscode.ConfigurationTarget.Global);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 添加命令</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;contributes&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;commands&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.InputToken&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;InputToken&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">     ]</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Vscode设置区配置</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#032F62;">&quot;configuration&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;properties&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;UsefulCode.token&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;string&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;default&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;$comment&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;输入OpenAI的token&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;description&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Enter your OpenAPI token.&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 注册输入token命令</span></span>
<span class="line"><span style="color:#24292E;">	context.subscriptions.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">		vscode.commands.</span><span style="color:#6F42C1;">registerCommand</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;UsefulCode.InputToken&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">userToken</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> vscode.window.</span><span style="color:#6F42C1;">showInputBox</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">				prompt: </span><span style="color:#032F62;">&#39;Enter your OpenAI API token&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">				placeHolder: </span><span style="color:#032F62;">&#39;Token&#39;</span></span>
<span class="line"><span style="color:#24292E;">			});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (userToken) {</span></span>
<span class="line"><span style="color:#24292E;">				</span><span style="color:#6A737D;">// 保存用户的Token</span></span>
<span class="line"><span style="color:#24292E;">				</span><span style="color:#6F42C1;">saveToken</span><span style="color:#24292E;">(userToken);</span></span>
<span class="line"><span style="color:#24292E;">				vscode.window.</span><span style="color:#6F42C1;">showInformationMessage</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;设置Token成功&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">			}</span></span>
<span class="line"><span style="color:#24292E;">		})</span></span>
<span class="line"><span style="color:#24292E;">	);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 保存token到全局设置，方便调用</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">saveToken</span><span style="color:#24292E;">(</span><span style="color:#E36209;">token</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">config</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> vscode.workspace.</span><span style="color:#6F42C1;">getConfiguration</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">CONFIG_SECTION</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">	config.</span><span style="color:#6F42C1;">update</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;token&#39;</span><span style="color:#24292E;">, token, vscode.ConfigurationTarget.Global);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div></li><li><p>在Vscode中添加一个侧边栏还有webView视图，作为主要问答区。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;viewsContainers&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 侧边栏图标配置</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;activitybar&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;id&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;useful_code_sidebar&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;icon&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;./assets/icon.svg&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 侧边栏视图</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;views&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;useful_code_sidebar&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;id&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;useful_code_sidebar-view&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;询问窗口&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;webview&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;initialSize&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">provider</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ChatViewProvider</span><span style="color:#E1E4E8;">(context.extensionUri);</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">// 注册 Webview 视图提供程序，第一个参数就是展示视图区域Id，第二个参数是视图主类实现</span></span>
<span class="line"><span style="color:#E1E4E8;">	context.subscriptions.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">vscode.window.</span><span style="color:#B392F0;">registerWebviewViewProvider</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;useful_code_sidebar-view&#39;</span><span style="color:#E1E4E8;">, provider)</span></span>
<span class="line"><span style="color:#E1E4E8;">	);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 创建webView主类</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ChatViewProvider</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">implements</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">vscode</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">WebviewViewProvider</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">_view</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">vscode</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">WebviewView</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">constructor</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">readonly</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">_extensionUri</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">vscode</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Uri</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">	) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resolveWebviewView</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">webviewView</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">vscode</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">WebviewView</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._view </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> webviewView;</span></span>
<span class="line"><span style="color:#E1E4E8;">		console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(webviewView.webview </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._view?.webview);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#6A737D;">// 设置 Webview 的 HTML 内容</span></span>
<span class="line"><span style="color:#E1E4E8;">		webviewView.webview.html </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">getWebviewContent</span><span style="color:#E1E4E8;">(webviewView.webview);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">		webviewView.webview.options </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">			enableScripts: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">			localResourceRoots: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._extensionUri</span></span>
<span class="line"><span style="color:#E1E4E8;">      ], </span><span style="color:#6A737D;">// 允许访问其他本地资源，并定义加载本地内容的根 URI</span></span>
<span class="line"><span style="color:#E1E4E8;">		};</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#6A737D;">// 处理 Webview 的消息和事件</span></span>
<span class="line"><span style="color:#E1E4E8;">		webviewView.webview.</span><span style="color:#B392F0;">onDidReceiveMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">message</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#6A737D;">// 处理来自 Webview 的消息</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (message.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;message&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> message.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;askQuestion&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">				</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">res</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">callOpenAI</span><span style="color:#E1E4E8;">(message.value);</span></span>
<span class="line"><span style="color:#E1E4E8;">				</span><span style="color:#6A737D;">// 处理收到的消息</span></span>
<span class="line"><span style="color:#E1E4E8;">				</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(res) {</span></span>
<span class="line"><span style="color:#E1E4E8;">					</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">responseMessage</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`\${</span><span style="color:#E1E4E8;">res</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">content</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">					</span><span style="color:#6A737D;">// 发送响应消息给 Webview</span></span>
<span class="line"><span style="color:#E1E4E8;">					webviewView?.webview.</span><span style="color:#B392F0;">postMessage</span><span style="color:#E1E4E8;">({ type: </span><span style="color:#9ECBFF;">&#39;response&#39;</span><span style="color:#E1E4E8;">, value: responseMessage });</span></span>
<span class="line"><span style="color:#E1E4E8;">				}</span></span>
<span class="line"><span style="color:#E1E4E8;">			}</span></span>
<span class="line"><span style="color:#E1E4E8;">		});</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">// 处理 Webview 的消息和事件</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">postMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">message</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._view) {</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._view.webview?.</span><span style="color:#B392F0;">postMessage</span><span style="color:#E1E4E8;">({ type: </span><span style="color:#9ECBFF;">&#39;askQuestion&#39;</span><span style="color:#E1E4E8;">, value: message });</span></span>
<span class="line"><span style="color:#E1E4E8;">		}</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// webView内容</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getWebviewContent</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">webview</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">vscode</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Webview</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">scriptUri</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> webview.</span><span style="color:#B392F0;">asWebviewUri</span><span style="color:#E1E4E8;">(vscode.Uri.</span><span style="color:#B392F0;">joinPath</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._extensionUri, </span><span style="color:#9ECBFF;">&#39;media&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;main.js&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">promptScriptUri</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> webview.</span><span style="color:#B392F0;">asWebviewUri</span><span style="color:#E1E4E8;">(vscode.Uri.</span><span style="color:#B392F0;">joinPath</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._extensionUri, </span><span style="color:#9ECBFF;">&#39;media&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;prompt.json&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#6A737D;">// Do the same for the stylesheet.</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">styleResetUri</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> webview.</span><span style="color:#B392F0;">asWebviewUri</span><span style="color:#E1E4E8;">(vscode.Uri.</span><span style="color:#B392F0;">joinPath</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._extensionUri, </span><span style="color:#9ECBFF;">&#39;media&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;reset.css&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">styleVSCodeUri</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> webview.</span><span style="color:#B392F0;">asWebviewUri</span><span style="color:#E1E4E8;">(vscode.Uri.</span><span style="color:#B392F0;">joinPath</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._extensionUri, </span><span style="color:#9ECBFF;">&#39;media&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;vscode.css&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">styleMainUri</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> webview.</span><span style="color:#B392F0;">asWebviewUri</span><span style="color:#E1E4E8;">(vscode.Uri.</span><span style="color:#B392F0;">joinPath</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._extensionUri, </span><span style="color:#9ECBFF;">&#39;media&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;main.css&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">nonce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getNonce</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`</span></span>
<span class="line"><span style="color:#9ECBFF;">			&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">			&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">			&lt;head&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">	&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#39;none&#39;; style-src \${</span><span style="color:#E1E4E8;">webview</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">cspSource</span><span style="color:#9ECBFF;">}; script-src &#39;nonce-\${</span><span style="color:#E1E4E8;">nonce</span><span style="color:#9ECBFF;">}&#39;;&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">	&lt;link href=&quot;\${</span><span style="color:#E1E4E8;">styleResetUri</span><span style="color:#9ECBFF;">}&quot; rel=&quot;stylesheet&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">	&lt;link href=&quot;\${</span><span style="color:#E1E4E8;">styleVSCodeUri</span><span style="color:#9ECBFF;">}&quot; rel=&quot;stylesheet&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">	&lt;link href=&quot;\${</span><span style="color:#E1E4E8;">styleMainUri</span><span style="color:#9ECBFF;">}&quot; rel=&quot;stylesheet&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">  &lt;title&gt;UsefulCode&lt;/title&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">&lt;/head&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">					&lt;body&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">							&lt;div class=&quot;chat-container&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">									&lt;div class=&quot;chat-messages&quot; id=&quot;chatMessages&quot;&gt;&lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">									&lt;div class=&quot;chat-input&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">										&lt;textarea placeholder=&quot;请输入你的问题，（输入&#39;/&#39;可以触发提示词）&quot; class=&quot;messageInput&quot; id=&quot;messageInput&quot;&gt;&lt;/textarea&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">										&lt;button class=&quot;send-btn&quot; id=&quot;sendButton&quot;&gt;Send&lt;/button&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">										&lt;div class=&quot;position&quot; id=&quot;position&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">									  &lt;span&gt;角色&lt;/span&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">									&lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">										&lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">							&lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">							&lt;script nonce=&quot;\${</span><span style="color:#E1E4E8;">nonce</span><span style="color:#9ECBFF;">}&quot; src=&quot;\${</span><span style="color:#E1E4E8;">promptScriptUri</span><span style="color:#9ECBFF;">}&quot;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">							&lt;script nonce=&quot;\${</span><span style="color:#E1E4E8;">nonce</span><span style="color:#9ECBFF;">}&quot; src=&quot;\${</span><span style="color:#E1E4E8;">scriptUri</span><span style="color:#9ECBFF;">}&quot;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">					&lt;/body&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">					&lt;/html&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">			\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;viewsContainers&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 侧边栏图标配置</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;activitybar&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;id&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;useful_code_sidebar&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;icon&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;./assets/icon.svg&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 侧边栏视图</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;views&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;useful_code_sidebar&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;id&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;useful_code_sidebar-view&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;询问窗口&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;webview&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;initialSize&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">provider</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ChatViewProvider</span><span style="color:#24292E;">(context.extensionUri);</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">// 注册 Webview 视图提供程序，第一个参数就是展示视图区域Id，第二个参数是视图主类实现</span></span>
<span class="line"><span style="color:#24292E;">	context.subscriptions.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">vscode.window.</span><span style="color:#6F42C1;">registerWebviewViewProvider</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;useful_code_sidebar-view&#39;</span><span style="color:#24292E;">, provider)</span></span>
<span class="line"><span style="color:#24292E;">	);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 创建webView主类</span></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ChatViewProvider</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">vscode</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">WebviewViewProvider</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#E36209;">_view</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">vscode</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">WebviewView</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">constructor</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">readonly</span><span style="color:#24292E;"> </span><span style="color:#E36209;">_extensionUri</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">vscode</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">Uri</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">resolveWebviewView</span><span style="color:#24292E;">(</span><span style="color:#E36209;">webviewView</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">vscode</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">WebviewView</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._view </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> webviewView;</span></span>
<span class="line"><span style="color:#24292E;">		console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(webviewView.webview </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._view?.webview);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6A737D;">// 设置 Webview 的 HTML 内容</span></span>
<span class="line"><span style="color:#24292E;">		webviewView.webview.html </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">getWebviewContent</span><span style="color:#24292E;">(webviewView.webview);</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">		webviewView.webview.options </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">			enableScripts: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">			localResourceRoots: [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._extensionUri</span></span>
<span class="line"><span style="color:#24292E;">      ], </span><span style="color:#6A737D;">// 允许访问其他本地资源，并定义加载本地内容的根 URI</span></span>
<span class="line"><span style="color:#24292E;">		};</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6A737D;">// 处理 Webview 的消息和事件</span></span>
<span class="line"><span style="color:#24292E;">		webviewView.webview.</span><span style="color:#6F42C1;">onDidReceiveMessage</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#E36209;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#6A737D;">// 处理来自 Webview 的消息</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (message.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;message&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> message.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;askQuestion&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">				</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">callOpenAI</span><span style="color:#24292E;">(message.value);</span></span>
<span class="line"><span style="color:#24292E;">				</span><span style="color:#6A737D;">// 处理收到的消息</span></span>
<span class="line"><span style="color:#24292E;">				</span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(res) {</span></span>
<span class="line"><span style="color:#24292E;">					</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">responseMessage</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">res</span><span style="color:#032F62;">.</span><span style="color:#24292E;">content</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">					</span><span style="color:#6A737D;">// 发送响应消息给 Webview</span></span>
<span class="line"><span style="color:#24292E;">					webviewView?.webview.</span><span style="color:#6F42C1;">postMessage</span><span style="color:#24292E;">({ type: </span><span style="color:#032F62;">&#39;response&#39;</span><span style="color:#24292E;">, value: responseMessage });</span></span>
<span class="line"><span style="color:#24292E;">				}</span></span>
<span class="line"><span style="color:#24292E;">			}</span></span>
<span class="line"><span style="color:#24292E;">		});</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">// 处理 Webview 的消息和事件</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">postMessage</span><span style="color:#24292E;">(</span><span style="color:#E36209;">message</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._view) {</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._view.webview?.</span><span style="color:#6F42C1;">postMessage</span><span style="color:#24292E;">({ type: </span><span style="color:#032F62;">&#39;askQuestion&#39;</span><span style="color:#24292E;">, value: message });</span></span>
<span class="line"><span style="color:#24292E;">		}</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// webView内容</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getWebviewContent</span><span style="color:#24292E;">(</span><span style="color:#E36209;">webview</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">vscode</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">Webview</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">scriptUri</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> webview.</span><span style="color:#6F42C1;">asWebviewUri</span><span style="color:#24292E;">(vscode.Uri.</span><span style="color:#6F42C1;">joinPath</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._extensionUri, </span><span style="color:#032F62;">&#39;media&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;main.js&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">promptScriptUri</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> webview.</span><span style="color:#6F42C1;">asWebviewUri</span><span style="color:#24292E;">(vscode.Uri.</span><span style="color:#6F42C1;">joinPath</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._extensionUri, </span><span style="color:#032F62;">&#39;media&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;prompt.json&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6A737D;">// Do the same for the stylesheet.</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">styleResetUri</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> webview.</span><span style="color:#6F42C1;">asWebviewUri</span><span style="color:#24292E;">(vscode.Uri.</span><span style="color:#6F42C1;">joinPath</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._extensionUri, </span><span style="color:#032F62;">&#39;media&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;reset.css&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">styleVSCodeUri</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> webview.</span><span style="color:#6F42C1;">asWebviewUri</span><span style="color:#24292E;">(vscode.Uri.</span><span style="color:#6F42C1;">joinPath</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._extensionUri, </span><span style="color:#032F62;">&#39;media&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;vscode.css&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">styleMainUri</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> webview.</span><span style="color:#6F42C1;">asWebviewUri</span><span style="color:#24292E;">(vscode.Uri.</span><span style="color:#6F42C1;">joinPath</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">._extensionUri, </span><span style="color:#032F62;">&#39;media&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;main.css&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">nonce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getNonce</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`</span></span>
<span class="line"><span style="color:#032F62;">			&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color:#032F62;">			&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">			&lt;head&gt;</span></span>
<span class="line"><span style="color:#032F62;">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">	&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#39;none&#39;; style-src \${</span><span style="color:#24292E;">webview</span><span style="color:#032F62;">.</span><span style="color:#24292E;">cspSource</span><span style="color:#032F62;">}; script-src &#39;nonce-\${</span><span style="color:#24292E;">nonce</span><span style="color:#032F62;">}&#39;;&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">	&lt;link href=&quot;\${</span><span style="color:#24292E;">styleResetUri</span><span style="color:#032F62;">}&quot; rel=&quot;stylesheet&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">	&lt;link href=&quot;\${</span><span style="color:#24292E;">styleVSCodeUri</span><span style="color:#032F62;">}&quot; rel=&quot;stylesheet&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">	&lt;link href=&quot;\${</span><span style="color:#24292E;">styleMainUri</span><span style="color:#032F62;">}&quot; rel=&quot;stylesheet&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">  &lt;title&gt;UsefulCode&lt;/title&gt;</span></span>
<span class="line"><span style="color:#032F62;">&lt;/head&gt;</span></span>
<span class="line"><span style="color:#032F62;">					&lt;body&gt;</span></span>
<span class="line"><span style="color:#032F62;">							&lt;div class=&quot;chat-container&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">									&lt;div class=&quot;chat-messages&quot; id=&quot;chatMessages&quot;&gt;&lt;/div&gt;</span></span>
<span class="line"><span style="color:#032F62;">									&lt;div class=&quot;chat-input&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">										&lt;textarea placeholder=&quot;请输入你的问题，（输入&#39;/&#39;可以触发提示词）&quot; class=&quot;messageInput&quot; id=&quot;messageInput&quot;&gt;&lt;/textarea&gt;</span></span>
<span class="line"><span style="color:#032F62;">										&lt;button class=&quot;send-btn&quot; id=&quot;sendButton&quot;&gt;Send&lt;/button&gt;</span></span>
<span class="line"><span style="color:#032F62;">										&lt;div class=&quot;position&quot; id=&quot;position&quot;&gt;</span></span>
<span class="line"><span style="color:#032F62;">									  &lt;span&gt;角色&lt;/span&gt;</span></span>
<span class="line"><span style="color:#032F62;">									&lt;/div&gt;</span></span>
<span class="line"><span style="color:#032F62;">										&lt;/div&gt;</span></span>
<span class="line"><span style="color:#032F62;">							&lt;/div&gt;</span></span>
<span class="line"><span style="color:#032F62;">							&lt;script nonce=&quot;\${</span><span style="color:#24292E;">nonce</span><span style="color:#032F62;">}&quot; src=&quot;\${</span><span style="color:#24292E;">promptScriptUri</span><span style="color:#032F62;">}&quot;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="color:#032F62;">							&lt;script nonce=&quot;\${</span><span style="color:#24292E;">nonce</span><span style="color:#032F62;">}&quot; src=&quot;\${</span><span style="color:#24292E;">scriptUri</span><span style="color:#032F62;">}&quot;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="color:#032F62;">					&lt;/body&gt;</span></span>
<span class="line"><span style="color:#032F62;">					&lt;/html&gt;</span></span>
<span class="line"><span style="color:#032F62;">			\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br></div></div><p>webView基本js逻辑就是按钮发送消息还有接受回答消息展示，另写在<code>main.js</code>文件中。</p></li><li><p>在Vscode中添加右键菜单提问,选中时才显示快捷菜单，还有绑定快捷键。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">&quot;commands&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.FindProblemsOfCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;查看代码是否存在问题&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;优化代码&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.ExplainCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;解释代码&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;keybindings&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.FindProblemsOfCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;key&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;ctrl+alt+f&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;when&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;editorTextFocus&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;key&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;ctrl+alt+o&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;when&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;editorTextFocus&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.ExplainCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;key&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;ctrl+alt+e&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;when&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;editorTextFocus&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;menus&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;editor/context&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.FindProblemsOfCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;group&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;askGroup@1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;when&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;editorHasSelection&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;group&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;askGroup@1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;when&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;editorHasSelection&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;command&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;UsefulCode.ExplainCode&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;group&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;askGroup@1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&quot;when&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;editorHasSelection&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">// 注册右键菜单命令 -- 优化代码（其他雷同）</span></span>
<span class="line"><span style="color:#E1E4E8;">	context.subscriptions.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">		vscode.commands.</span><span style="color:#B392F0;">registerCommand</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">editor</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> vscode.window.activeTextEditor;</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">selection</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> editor?.selection;</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> editor?.document.</span><span style="color:#B392F0;">getText</span><span style="color:#E1E4E8;">(selection) </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">			provider.</span><span style="color:#B392F0;">postMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;请你帮我优化一下这段代码</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> text);</span></span>
<span class="line"><span style="color:#E1E4E8;">		}));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">......</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">&quot;commands&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.FindProblemsOfCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;查看代码是否存在问题&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;优化代码&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.ExplainCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;解释代码&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;keybindings&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.FindProblemsOfCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;key&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;ctrl+alt+f&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;when&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;editorTextFocus&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;key&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;ctrl+alt+o&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;when&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;editorTextFocus&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.ExplainCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;key&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;ctrl+alt+e&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;when&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;editorTextFocus&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;menus&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;editor/context&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.FindProblemsOfCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;group&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;askGroup@1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;when&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;editorHasSelection&quot;</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;group&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;askGroup@1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;when&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;editorHasSelection&quot;</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;command&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;UsefulCode.ExplainCode&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;group&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;askGroup@1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;when&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;editorHasSelection&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">      </span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6A737D;">// 注册右键菜单命令 -- 优化代码（其他雷同）</span></span>
<span class="line"><span style="color:#24292E;">	context.subscriptions.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">		vscode.commands.</span><span style="color:#6F42C1;">registerCommand</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;UsefulCode.OptimizeCode&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">editor</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> vscode.window.activeTextEditor;</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">selection</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> editor?.selection;</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">text</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> editor?.document.</span><span style="color:#6F42C1;">getText</span><span style="color:#24292E;">(selection) </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">			provider.</span><span style="color:#6F42C1;">postMessage</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;请你帮我优化一下这段代码</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> text);</span></span>
<span class="line"><span style="color:#24292E;">		}));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">......</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div></li><li><p>在处理完成后，将结果显示在Vscode中。</p></li></ul><h3 id="发布和维护" tabindex="-1">发布和维护 <a class="header-anchor" href="#发布和维护" aria-label="Permalink to &quot;发布和维护&quot;">​</a></h3><p>在测试和调试完成之后，我们将插件发布到<a href="https://marketplace.visualstudio.com/" target="_blank" rel="noreferrer">Vscode插件市场</a>中。</p><h5 id="完善插件基本信息" tabindex="-1"><strong>完善插件基本信息</strong> <a class="header-anchor" href="#完善插件基本信息" aria-label="Permalink to &quot;**完善插件基本信息**&quot;">​</a></h5><ul><li><p>完善package.json配置</p><ul><li>添加图标</li><li>添加license</li><li>添加作者</li><li>添加仓库</li><li>添加关键词</li></ul></li><li><p>修改<code>README</code></p></li></ul><h3 id="vsce打包" tabindex="-1">vsce打包 <a class="header-anchor" href="#vsce打包" aria-label="Permalink to &quot;vsce打包&quot;">​</a></h3><ul><li>安装官方工具 vsce （Visual Studio Code Extensions）</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vsce</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-g</span><span style="color:#24292E;"> </span><span style="color:#032F62;">vsce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>打包</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">vsce </span><span style="color:#F97583;">package</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">vsce </span><span style="color:#D73A49;">package</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>通过 <a href="https://marketplace.visualstudio.com/manage/createpublisher" target="_blank" rel="noreferrer">create-publisher</a> 创建发布者 ，登录即可上传打包文件</p></li></ul><h2 id="基本模样" tabindex="-1">基本模样 <a class="header-anchor" href="#基本模样" aria-label="Permalink to &quot;基本模样&quot;">​</a></h2><img src="https://yhyblog-2023-2-8.oss-cn-hangzhou.aliyuncs.com/md/2023/05/image-20230530014625627.png" alt="image-20230530014625627" style="zoom:50%;"><img src="https://yhyblog-2023-2-8.oss-cn-hangzhou.aliyuncs.com/md/2023/05/image-20230530014538287.png" alt="image-20230530014538287" style="zoom:50%;"><img src="https://yhyblog-2023-2-8.oss-cn-hangzhou.aliyuncs.com/md/2023/05/image-20230530015237731.png" alt="image-20230530015237731" style="zoom:67%;"><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>ok,一个简单的插件就初步完成了😁。在这篇文章中，我们介绍了开发一个能够使用ChatGPT的Vscode插件的完整流程和代码讲解。通过这个插件的开发，我们可以更加方便地使用ChatGPT进行自然语言处理，提高工作效率。</p><ul><li></li></ul>`,28),e=[o];function t(c,r,E,y,i,u){return n(),a("div",null,e)}const q=s(p,[["render",t]]);export{b as __pageData,q as default};
