import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.c3fd347f.js";const b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"linux/docker安装jenkins.md","filePath":"linux/docker安装jenkins.md","lastUpdated":1707147609000}'),p={name:"linux/docker安装jenkins.md"},e=l(`<h2 id="使用docker安装jenkins-服务器太小-好像运行不下-未完-待续。。。" tabindex="-1">使用docker安装jenkins（服务器太小，好像运行不下，未完，待续。。。） <a class="header-anchor" href="#使用docker安装jenkins-服务器太小-好像运行不下-未完-待续。。。" aria-label="Permalink to &quot;使用docker安装jenkins（服务器太小，好像运行不下，未完，待续。。。）&quot;">​</a></h2><h4 id="安装maven" tabindex="-1">安装maven <a class="header-anchor" href="#安装maven" aria-label="Permalink to &quot;安装maven&quot;">​</a></h4><p><a href="https://maven.apache.org/download.cgi" target="_blank" rel="noreferrer">https://maven.apache.org/download.cgi</a> 下载<code>tar.gz</code>文件 上传服务器某个目录，进入目录，解压</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-zxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apache-maven-3.8.5-bin.tar.gz</span></span>
<span class="line"><span style="color:#6A737D;"># 重命名</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apache-maven-3.8.5-bin.tar.gz</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apache-maven-3.8.5</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-zxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apache-maven-3.8.5-bin.tar.gz</span></span>
<span class="line"><span style="color:#6A737D;"># 重命名</span></span>
<span class="line"><span style="color:#6F42C1;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apache-maven-3.8.5-bin.tar.gz</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apache-maven-3.8.5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="安装jdk11" tabindex="-1">安装jdk11 <a class="header-anchor" href="#安装jdk11" aria-label="Permalink to &quot;安装jdk11&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">java-11-openjdk.x86_64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#配置环境变量</span></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">JAVA_HOME</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/usr/lib/jvm/java-11-openjdk-11.0.20.0.8-1.el7_9.x86_64</span></span>
<span class="line"><span style="color:#E1E4E8;">CLASSPATH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">.:</span><span style="color:#E1E4E8;">$JAVA_HOME</span><span style="color:#9ECBFF;">/lib/dt.jar:</span><span style="color:#E1E4E8;">$JAVA_HOME</span><span style="color:#9ECBFF;">/lib/tools.jar</span></span>
<span class="line"><span style="color:#E1E4E8;">PATH</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">$JAVA_HOME</span><span style="color:#9ECBFF;">/bin:</span><span style="color:#E1E4E8;">$PATH</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">JAVA_HOME</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CLASSPATH</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PATH</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> MAVEN_HOME</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/opt/soft/maven/apache-maven-3.9.4</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> PATH</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">\${MAVEN_HOME}</span><span style="color:#9ECBFF;">/bin:</span><span style="color:#E1E4E8;">\${PATH}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使配置生效</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/profile</span></span>
<span class="line"><span style="color:#B392F0;">java</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-version</span></span>
<span class="line"><span style="color:#B392F0;">mvn</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">java-11-openjdk.x86_64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#配置环境变量</span></span>
<span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">JAVA_HOME</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/usr/lib/jvm/java-11-openjdk-11.0.20.0.8-1.el7_9.x86_64</span></span>
<span class="line"><span style="color:#24292E;">CLASSPATH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">.:</span><span style="color:#24292E;">$JAVA_HOME</span><span style="color:#032F62;">/lib/dt.jar:</span><span style="color:#24292E;">$JAVA_HOME</span><span style="color:#032F62;">/lib/tools.jar</span></span>
<span class="line"><span style="color:#24292E;">PATH</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">$JAVA_HOME</span><span style="color:#032F62;">/bin:</span><span style="color:#24292E;">$PATH</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#032F62;">JAVA_HOME</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CLASSPATH</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PATH</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> MAVEN_HOME</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/opt/soft/maven/apache-maven-3.9.4</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> PATH</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">\${MAVEN_HOME}</span><span style="color:#032F62;">/bin:</span><span style="color:#24292E;">\${PATH}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使配置生效</span></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/profile</span></span>
<span class="line"><span style="color:#6F42C1;">java</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-version</span></span>
<span class="line"><span style="color:#6F42C1;">mvn</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="配置maven加速镜像" tabindex="-1">配置Maven加速镜像 <a class="header-anchor" href="#配置maven加速镜像" aria-label="Permalink to &quot;配置Maven加速镜像&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apache-maven-3.8.5/conf/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">settings.xml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">mirrors</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">mirror&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">id&gt;alimaven&lt;/id&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">name&gt;aliyun</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">maven</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">/nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">mirrorOf&gt;central&lt;/mirrorOf&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">/mirror&gt;</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">/mirrors</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apache-maven-3.8.5/conf/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">settings.xml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">mirrors</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">mirror&gt;</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">id&gt;alimaven&lt;/id&gt;</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">name&gt;aliyun</span><span style="color:#24292E;"> </span><span style="color:#032F62;">maven</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">/nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">mirrorOf&gt;central&lt;/mirrorOf&gt;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">/mirror&gt;</span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">/mirrors</span><span style="color:#D73A49;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="docker安装jenkins" tabindex="-1">docker安装jenkins <a class="header-anchor" href="#docker安装jenkins" aria-label="Permalink to &quot;docker安装jenkins&quot;">​</a></h4><ul><li>进入<a href="http://hub.docker.xn--com-wq9dt4gkryx2ehsqqz0b9p5d" target="_blank" rel="noreferrer">http://hub.docker.com官方的镜像仓库</a>，下载Jenkins的镜像</li><li>在dockerhub里搜索jenkins/jenkins，点击tag，搜索jdk11，然后选择jenkins:2.346.3-2-lts-jdk11即可：</li><li>拉取镜像</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jenkins/jenkins:2.414.1-lts-jdk11</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jenkins/jenkins:2.414.1-lts-jdk11</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>运行jenkins</li><li>注意中间空格格式，否则报错（docker: invalid reference format.See &#39;docker run --help&#39;.）</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8888</span><span style="color:#9ECBFF;">:8080</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">50000</span><span style="color:#9ECBFF;">:50000</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jenkins</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--restart=always</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/opt/soft/jdk8/jdk8:/usr/local/jdk1.8</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/opt/soft/jenkins_home:/var/jenkins_home</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/opt/soft/maven/apache-maven-3.9.4:/usr/local/maven</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/localtime:/etc/localtime</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jenkins/jenkins:2.414.1-lts-jdk11</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8888</span><span style="color:#032F62;">:8080</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">50000</span><span style="color:#032F62;">:50000</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jenkins</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--restart=always</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/opt/soft/jdk8/jdk8:/usr/local/jdk1.8</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/opt/soft/jenkins_home:/var/jenkins_home</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/opt/soft/maven/apache-maven-3.9.4:/usr/local/maven</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/localtime:/etc/localtime</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jenkins/jenkins:2.414.1-lts-jdk11</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">参数说明：</span></span>
<span class="line"><span style="color:#e1e4e8;">　-p 8888:8080   意义： 将镜像的8080端口映射到服务器的8888端口。</span></span>
<span class="line"><span style="color:#e1e4e8;">   50000是Agent连接Server用到的通信端口。(后面安装JenkinsAgent的时候要注意网络连通性)</span></span>
<span class="line"><span style="color:#e1e4e8;">　--name jenkins  意义：给容器起一个别名</span></span>
<span class="line"><span style="color:#e1e4e8;">　-v /opt/soft/jdk8/jdk8:/usr/local/jdk1.8  意义：是把linux下的jdk和容器内的关联  </span></span>
<span class="line"><span style="color:#e1e4e8;"> -v /opt/soft/jenkins_home:/var/jenkins_home  意义： /var/jenkins_home目录为容器jenkins工作目录，我们将硬盘上的一个目录挂载到这个位置，方便后                        续更新镜像后继续使用原来的工作目录。这里设置的就是 /opt/soft/jenkins_home目录</span></span>
<span class="line"><span style="color:#e1e4e8;">　-v /etc/localtime:/etc/localtime  意义：让容器使用和服务器同样的时间设置。</span></span>
<span class="line"><span style="color:#e1e4e8;"> -d 后台运行镜像</span></span>
<span class="line"><span style="color:#e1e4e8;"> -v /opt/soft/maven/apache-maven-3.9.4:/usr/local/maven 意义：挂载本地maven，前面是服务器上的，后面是挂载到容器上的目录，后面使用maven时只能找到容器上的目录，有需要maven的话最好要挂载一下</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">参数说明：</span></span>
<span class="line"><span style="color:#24292e;">　-p 8888:8080   意义： 将镜像的8080端口映射到服务器的8888端口。</span></span>
<span class="line"><span style="color:#24292e;">   50000是Agent连接Server用到的通信端口。(后面安装JenkinsAgent的时候要注意网络连通性)</span></span>
<span class="line"><span style="color:#24292e;">　--name jenkins  意义：给容器起一个别名</span></span>
<span class="line"><span style="color:#24292e;">　-v /opt/soft/jdk8/jdk8:/usr/local/jdk1.8  意义：是把linux下的jdk和容器内的关联  </span></span>
<span class="line"><span style="color:#24292e;"> -v /opt/soft/jenkins_home:/var/jenkins_home  意义： /var/jenkins_home目录为容器jenkins工作目录，我们将硬盘上的一个目录挂载到这个位置，方便后                        续更新镜像后继续使用原来的工作目录。这里设置的就是 /opt/soft/jenkins_home目录</span></span>
<span class="line"><span style="color:#24292e;">　-v /etc/localtime:/etc/localtime  意义：让容器使用和服务器同样的时间设置。</span></span>
<span class="line"><span style="color:#24292e;"> -d 后台运行镜像</span></span>
<span class="line"><span style="color:#24292e;"> -v /opt/soft/maven/apache-maven-3.9.4:/usr/local/maven 意义：挂载本地maven，前面是服务器上的，后面是挂载到容器上的目录，后面使用maven时只能找到容器上的目录，有需要maven的话最好要挂载一下</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="修改jenkins镜像" tabindex="-1">修改jenkins镜像 <a class="header-anchor" href="#修改jenkins镜像" aria-label="Permalink to &quot;修改jenkins镜像&quot;">​</a></h4><p>清华源地址： <a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noreferrer">https://mirrors.tuna.tsinghua.edu.cn/</a> 找到jenkins/updates和自己相似的版本 在上面自己配置的<code>/opt/soft/jenkins_home</code>目录下，修改<code>hudson.model.UpdateCenter.xml</code>内容</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">将 url 修改为 清华大学官方镜像：https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/2.46/update-center.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">将 url 修改为 清华大学官方镜像：https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/2.46/update-center.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="获取jenkins密码" tabindex="-1">获取jenkins密码 <a class="header-anchor" href="#获取jenkins密码" aria-label="Permalink to &quot;获取jenkins密码&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jenkins</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jenkins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="jenkins容器配置maven环境变量" tabindex="-1">jenkins容器配置maven环境变量 <a class="header-anchor" href="#jenkins容器配置maven环境变量" aria-label="Permalink to &quot;jenkins容器配置maven环境变量&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#root权限进入容器</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">容器ID</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#安装vim</span></span>
<span class="line"><span style="color:#B392F0;">apt-get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span></span>
<span class="line"><span style="color:#B392F0;">apt-get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vim</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#添加环境变量</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> JAVA_HOME</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/opt/java/openjdk</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> MAVEN_HOME</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/usr/local/maven</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> PATH</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">$PATH</span><span style="color:#9ECBFF;">:</span><span style="color:#E1E4E8;">$JAVA_HOME</span><span style="color:#9ECBFF;">/bin:</span><span style="color:#E1E4E8;">\${MAVEN_HOME}</span><span style="color:#9ECBFF;">/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#好像退出容器环境变量就不生效了，可以写到~/.bashrc目录里</span></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#root权限进入容器</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-it</span><span style="color:#24292E;"> </span><span style="color:#032F62;">容器ID</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#安装vim</span></span>
<span class="line"><span style="color:#6F42C1;">apt-get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">update</span></span>
<span class="line"><span style="color:#6F42C1;">apt-get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">vim</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#添加环境变量</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> JAVA_HOME</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/opt/java/openjdk</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> MAVEN_HOME</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/usr/local/maven</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> PATH</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">$PATH</span><span style="color:#032F62;">:</span><span style="color:#24292E;">$JAVA_HOME</span><span style="color:#032F62;">/bin:</span><span style="color:#24292E;">\${MAVEN_HOME}</span><span style="color:#032F62;">/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#好像退出容器环境变量就不生效了，可以写到~/.bashrc目录里</span></span>
<span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.bashrc</span></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.bashrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><p><a href="https://juejin.cn/post/6854573218687746062" target="_blank" rel="noreferrer">Docker安装Jenkins及配置详细教程</a><a href="https://juejin.cn/post/6862497968973742094" target="_blank" rel="noreferrer">超详细 Docker 安装Jenkins（避坑！！！）</a><a href="https://blog.51cto.com/wangzhenjun/5373487" target="_blank" rel="noreferrer">Docker安装Jenkins打包Maven项目为Docker镜像并运行</a><a href="https://zhuanlan.zhihu.com/p/615571448" target="_blank" rel="noreferrer">实战：docker方式安装jenkins-2023.3.19(测试成功)(荐)</a><a href="https://blog.csdn.net/yemao6/article/details/127422501" target="_blank" rel="noreferrer">docker安装jenkins后 配置jdk maven路径不识别问题</a><a href="https://blog.csdn.net/liu320yj/article/details/123633994" target="_blank" rel="noreferrer">Docker系列之搭建Jenkins持续集成Maven项目</a></p>`,23),o=[e];function r(c,t,i,y,E,d){return n(),a("div",null,o)}const m=s(p,[["render",r]]);export{b as __pageData,m as default};
